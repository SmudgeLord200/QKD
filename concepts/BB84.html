<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <title>The BB84 Protocol</title>

  <style>
    #img_container {
      position: relative;
    }

    #filter {
      width: 90px;
      height: 100%;
    }

    .right-t {
      position: absolute;
      bottom: -184px;
      right: 105px;
      font-size: 18px;
      padding-bottom: 10px;
    }

    .right-t2 {
      position: absolute;
      bottom: -120px;
      right: -5px;
      font-size: 18px;
      padding-bottom: 10px;
    }

    .e-text {
      font-size: 16px;
      text-decoration: underline;
    }
  </style>
</head>

<body>

  <script>
    var photon_detector = new Image();
    var polaroid_filter = new Image();

    function initialize() {
      photon_detector.src = "/concepts/photon_detector.jpg";
      polaroid_filter.src = "/concepts/p_filter_02.jpg";

      window.requestAnimationFrame(draw);
    }

    function draw() {
      var ctx = document.getElementById("anim").getContext("2d");
      ctx.globalCompositeOperation = "source-over";
      ctx.clearRect(0, 0, 1000, 300);
      ctx.fillStyle = "rgba(0, 0, 0, 0.4)";
      ctx.strokeStyle = "rgba(0, 153, 255, 0.4)";
      ctx.save();
      ctx.translate(150, 150);

      var time = new Date();
      ctx.rotate(((2 * Math.PI) / 60) * time.getSeconds() + ((2 * Math.PI) / 60000) * time.getMilliseconds());
      ctx.translate(105, 0);
      ctx.fillRect(0, -12, 50, 24); // Shadow
      ctx.drawImage(photon_detector, -12, -12);

      ctx.save();
      ctx.rotate(((2 * Math.PI) / 6) * time.getSeconds() + ((2 * Math.PI) / 6000) * time.getMilliseconds());
      ctx.translate(0, 28.5);
      ctx.drawImage(polaroid_filter, -3.5, -3.5);
      ctx.restore();

      ctx.restore();

      ctx.beginPath();
      ctx.arc(150, 150, 105, 0, Math.PI * 2, false); // Earth orbit
      ctx.stroke();
      
      //window.requestAnimationFrame(draw);
    }

    initialize();
  </script>
  <div class="container-fluid">
    <div class="row">
      <h4 class=" pt-3 pb-3 bg-primary text-white text-center"><u>The BB84 Protocol</u></h4>
    </div>

    <div class="row mx-auto">
      <p class="mt-2">
        There are three major steps in the BB84 protocol, namely Key Exchange, Error Correction, Privacy Amplification.
      </p>
      <div class="accordion" id="accordionPanelsStayOpenExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="panelsStayOpen-headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
              data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
              aria-controls="panelsStayOpen-collapseOne">
              Key Exchange
            </button>
          </h2>
          <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
            aria-labelledby="panelsStayOpen-headingOne">
            <div class="accordion-body clearfix">
              <canvas id="anim" width="1000" height="300"></canvas>
              <p><strong>During Key Exchange,</strong> the two parties transmit photons using <span
                  class="fw-bold">photon detectors</span> equipped
                with polaroid filters.</p>
              <div id="img_container">
                <img src="/concepts/p_filter_02.jpg" alt="Polaroid Filter" class="img-fluid float-end" id="filter">
                <div class="right-t"><u>Photon Detector</u></div>
                <img src="/concepts/photon_detector.jpg" alt="Polaroid Detector" class="img-fluid float-end"
                  id="detector" style="width: 180px; height: 100%;">
                <div class="right-t2"><u>Polaroid Filter</u></div>
              </div>
              <p>They <span class="fst-italic">randomly switch between the two polarization bases</span>, i.e., <span
                  class="fw-bold">Rectilinear</span> (horizontal and vertical) basis,
                and <span class="fw-bold">Diagonal</span> (+45 ยบ/-45ยบ) basis, to transmit the photons. The correct
                photons will be filtered out <span class="text-danger fw-bold">if
                  and only if</span> the polarization base chosen by both parties is the same. Otherwise, there is a 50%
                probability that a wrong photon will be filtered out <span class="fst-italic">(Heisenberg's Uncertainty
                  Principle)</span>.</p>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
              aria-controls="panelsStayOpen-collapseTwo">
              Error Correction
            </button>
          </h2>
          <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
            aria-labelledby="panelsStayOpen-headingTwo">
            <div class="accordion-body clearfix">
              <p class="mb-0"><strong>During Error Correction,</strong> the two parties compare their chosen
                polarization bases during
                key exchange via a public channel. They keep the correct photons and discard the incorrect ones.
                According
                to the nature of quantum physics, <q class="fst-italic">a slight observation of the photon disturbs it
                  in an irreversible way.</q>
                In brief, if an eavesdropper intercepts the transmission, the photon will be disturbed, and all of its
                previous state information is lost. The two parties can sure detect this irregular photon pattern in the
                error correction phase, thus knowing the presence of an eavesdropper.</p>
              <div class="text-center"><img src="/concepts/error_correction.png" alt="Error Correction"
                  class="img-fluid">
                <p class="mb-0 e-text">Error Correction Process</p>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="panelsStayOpen-headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
              aria-controls="panelsStayOpen-collapseThree">
              Privacy Amplification
            </button>
          </h2>
          <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
            aria-labelledby="panelsStayOpen-headingThree">
            <div class="accordion-body">
              <strong>During Privacy Amplification,</strong> if the two parties confirm no presence of an eavesdropper,
              they can use the key directly. If the two parties confirm the presence of an eavesdropper, they can take
              countermeasures, such as compressing the key length. After that, the key is safe to go. <span
                class="fw-bold">It is noted that
                this step will not be demonstrated in the game.</span>
            </div>
          </div>
        </div>
      </div>


    </div>

    <div class="d-flex justify-content-end pt-1 mt-3">
      <button type="button" class="btn btn-primary btn-md"
        onclick="document.location='/conceptsLobby.html'">Back</button>
    </div>
  </div>
</body>

</html>